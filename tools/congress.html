<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Congress Trade Monitor | Daily Dividend</title>

  <!-- Access Control -->
  <script type="module">
    import { isRemembered } from '../auth.js';
    if (!isRemembered()) {
      window.location.href = '/login.html';
    }
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Montserrat:wght@500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"></noscript>

  <link rel="stylesheet" href="../styles.css?v=17">
  <link rel="stylesheet" href="congress.css">
</head>
<body>
  <nav class="navbar" role="navigation" aria-label="Main navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <a href="../index.html"><img src="../DDlogo.png?v=2" alt="Daily Dividend Logo - Markets within minutes" class="logo-dd-image" width="120" height="40" style="border-radius:12px;"></a>
      </div>
      <div class="nav-links" role="menubar">
        <a href="../index.html#features">About Us</a>
        <a href="../index.html#how-it-works">What We Offer</a>
        <a href="../index.html#pricing">Pricing</a>
        <a href="../index.html#test">Test</a>
        <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
        <a href="index.html">Tools</a>
      </div>
      <button class="mobile-menu-btn" type="button" aria-label="Toggle navigation menu" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
      <div class="mobile-menu" id="mobileMenu">
        <a href="../index.html#features" onclick="closeMobileMenu()">About Us</a>
        <a href="../index.html#how-it-works" onclick="closeMobileMenu()">What We Offer</a>
        <a href="../index.html#pricing" onclick="closeMobileMenu()">Pricing</a>
        <a href="../index.html#test" onclick="closeMobileMenu()">Test</a>
        <a href="index.html" onclick="closeMobileMenu()">Tools</a>
      </div>
    </div>
  </nav>

  <main>
    <section class="ct-hero" aria-labelledby="ct-hero-heading">
      <h1 id="ct-hero-heading">Congress Trade Monitor</h1>
    </section>

    <!-- Landing view: grid of members -->
    <section id="ct-landing" class="ct-landing" aria-label="Congress members">
      <div class="ct-panel ct-landing-inner">
        <div class="ct-landing-header">
          <div>
            <h2 class="ct-section-title">Select a member of Congress</h2>
            <p class="ct-landing-subtitle">This tool is in Beta mode and more content will be added over time. Any and all feedback is kindly welcomed.</p>
          </div>
        </div>
        <div id="ct-landing-list" class="ct-landing-grid">
          <!-- Member cards rendered by JS -->
        </div>
      </div>
    </section>

    <!-- Detail view: single member profile -->
    <div id="ct-detail" class="ct-wrapper" style="display:none;">
      <section class="ct-main" aria-label="Member trade detail">
        <section id="ct-profile" class="ct-section-card"></section>

        <section class="ct-panel ct-section-card" aria-labelledby="ct-timeline-heading">
          <div class="ct-section-header">
            <h2 id="ct-timeline-heading" class="ct-section-title">Trade Timeline</h2>
          </div>
          <div id="ct-timeline"></div>
        </section>
      </section>
    </div>
  </main>

  <script>
    const mobileMenu = document.getElementById('mobileMenu');
    function toggleMobileMenu() {
      if (mobileMenu) mobileMenu.classList.toggle('active');
    }
    function closeMobileMenu() {
      if (mobileMenu) mobileMenu.classList.remove('active');
    }

    // Close mobile menu when clicking outside
    document.addEventListener('click', (e) => {
      const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
      if (
        mobileMenu &&
        mobileMenu.classList.contains('active') &&
        !mobileMenu.contains(e.target) &&
        !mobileMenuBtn.contains(e.target)
      ) {
        closeMobileMenu();
      }
    });

    // Tools dropdown functionality

    // Initialize dropdown + logout
    function initNavbar() {
      initLogout();
    }

    // Logout functionality (mirrors other tools pages)
    async function initLogout() {
      const logoutBtn = document.getElementById('logoutBtn');
      if (!logoutBtn) return;

      logoutBtn.style.display = 'inline-block';
      logoutBtn.style.visibility = 'visible';
      logoutBtn.style.opacity = '1';

      if (!logoutBtn.dataset.listenerAttached) {
        const { logout } = await import('../auth.js');
        logoutBtn.addEventListener('click', (e) => {
          e.preventDefault();
          if (confirm('Are you sure you want to logout?')) {
            logout();
            window.location.href = '/login.html';
          }
        });
        logoutBtn.dataset.listenerAttached = 'true';
      }
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initNavbar);
    } else {
      initNavbar();
    }
  </script>
  <script src="congress.js"></script>
</body>
</html>


