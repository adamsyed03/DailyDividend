<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Company Analysis â€“ NVIDIA (NVDA), Meta (META) | Daily Dividend</title>
  <meta name="description" content="Daily Dividend company analysis hub delivering quarterly-ready deep dives on NVIDIA and Meta Platforms with revenue, earnings, analyst sentiment, and financial ratios.">
  
  <!-- Access Control -->
  <script type="module">
    import { isRemembered } from '../auth.js';
    if (!isRemembered()) {
      window.location.href = '/login.html';
    } else {
      // Immediately show logout button if logged in (before DOMContentLoaded)
      const showLogout = () => {
        const btn = document.getElementById('logoutBtn');
        if (btn) btn.style.display = 'inline-block';
      };
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', showLogout);
      } else {
        showLogout();
      }
    }
  </script>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
  <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"></noscript>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"></noscript>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“ˆ</text></svg>">
  <style>
    :root {
      --bg-body: #f3f4f6;
      --surface: #ffffff;
      --surface-soft: #f9fafb;
      --surface-muted: #eef2ff;
      --text-primary: #111827;
      --text-secondary: #4b5563;
      --accent: #2563eb;
      --accent-soft: #eff6ff;
      --success: #16a34a;
      --warning: #f59e0b;
      --danger: #dc2626;
      font-size: 15px;
    }
    
    /* Ensure logout button is always visible when logged in */
    #logoutBtn {
      display: inline-block !important;
      visibility: visible !important;
      opacity: 1 !important;
      pointer-events: auto !important;
    }
    
    /* Mobile-friendly logout button */
    @media (max-width: 768px) {
      #logoutBtn {
        font-size: 0.85rem;
        padding: 6px 12px;
      }
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg-body);
      color: var(--text-primary);
      min-height: 100vh;
      padding: 0 12px;
    }
    body * {
      font-family: inherit;
    }
    a { color: inherit; text-decoration: none; }
    .navbar {
      position: fixed;
      inset: 0 0 auto 0;
      background: #ffffff;
      border-bottom: 1px solid rgba(229, 231, 235, 0.7);
      backdrop-filter: blur(16px);
      z-index: 1000;
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      height: 70px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 28px;
    }
    .nav-logo img { width: 118px; height: auto; border-radius: 12px; }
    .nav-links {
      display: flex;
      align-items: center;
      gap: 26px;
    }
    .nav-links > a {
      font-weight: 500;
      font-size: 0.95rem;
      padding: 8px 12px;
      border-radius: 12px;
      color: #4b5563;
      transition: all 0.2s ease;
    }
    .nav-links > a:hover,
    .nav-links > a:focus {
      background: rgba(229, 231, 235, 0.7);
      color: var(--text-primary);
      outline: none;
    }
    .nav-dropdown {
      position: relative;
      display: inline-flex;
      align-items: center;
    }
    .nav-dropdown-btn {
      background: none;
      border: none;
      padding: 8px 14px;
      border-radius: 12px;
      color: #4b5563;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.2s ease;
    }
    .nav-dropdown-btn:hover,
    .nav-dropdown-btn:focus {
      background: rgba(229, 231, 235, 0.7);
      color: var(--text-primary);
      outline: none;
    }
    .nav-dropdown-menu {
      position: absolute;
      top: calc(100% + 10px);
      right: 0;
      min-width: 240px;
      background: #ffffff;
      border-radius: 18px;
      padding: 12px;
      display: none;
      flex-direction: column;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.15);
      gap: 6px;
    }
    .nav-dropdown-menu.active { display: flex; }
    .nav-dropdown-item {
      padding: 10px 12px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.92rem;
      color: #374151;
      transition: all 0.2s ease;
    }
    .nav-dropdown-item i { color: var(--accent); }
    .nav-dropdown-item:hover,
    .nav-dropdown-item:focus {
      background: var(--accent-soft);
      color: #1d4ed8;
      outline: none;
    }
    .mobile-menu-btn { display: none; }
    .mobile-menu { display: none; }
    main { padding-top: 0; }
    .ca-hero {
      background: linear-gradient(135deg, #111827 0%, #1f2937 50%, #0f172a 100%);
      padding: 120px 20px 80px;
      text-align: center;
      color: #f9fafb;
    }
    .ca-hero h1 {
      margin: 0 0 12px;
      font-size: clamp(2.2rem, 5vw, 3.4rem);
      letter-spacing: -0.02em;
    }
    .ca-hero p {
      margin: 0 auto;
      max-width: 620px;
      color: rgba(249, 250, 251, 0.7);
      font-size: 1.05rem;
      line-height: 1.6;
    }
    .ca-search {
      margin-top: 30px;
      display: flex;
      justify-content: center;
    }
    .ca-search input {
      width: min(440px, 90vw);
      padding: 14px 18px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      background: rgba(255, 255, 255, 0.14);
      color: #f9fafb;
      font-size: 1rem;
      backdrop-filter: blur(4px);
    }
    .ca-wrapper {
      max-width: 1200px;
      margin: -60px auto 80px;
      padding: 0 20px;
      display: grid;
      grid-template-columns: 300px minmax(0, 1fr);
      gap: 26px;
    }
    .ca-panel {
      background: var(--surface);
      border-radius: 24px;
      border: 1px solid rgba(229, 231, 235, 0.65);
      box-shadow: 0 20px 45px rgba(15, 23, 42, 0.08);
      padding: 26px;
    }
    .company-content-wrapper {
      position: relative;
      width: 100%;
    }
    .ca-panel.company-section {
      display: none !important;
      width: 100%;
      transition: opacity 0.25s ease;
    }
    .ca-panel.company-section.active {
      display: block !important;
      animation: fadeIn 0.25s ease;
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .company-list {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    .company-card {
      padding: 18px;
      border-radius: 18px;
      background: var(--surface-soft);
      border: 1px solid rgba(229, 231, 235, 0.8);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .company-card.active,
    .company-card:hover {
      border-color: var(--accent);
      box-shadow: 0 14px 30px rgba(37, 99, 235, 0.15);
      transform: translateY(-2px);
    }
    .company-card h3 {
      margin: 0 0 6px;
      font-size: 1.05rem;
    }
    .company-meta {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 0.86rem;
      color: var(--text-secondary);
    }
    .company-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }
    .company-tag {
      background: var(--accent-soft);
      color: var(--accent);
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.74rem;
      font-weight: 600;
    }
    .detail-header {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-bottom: 26px;
    }
    .detail-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 16px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent);
      font-weight: 600;
      font-size: 0.8rem;
      letter-spacing: 0.04em;
    }
    .detail-meta {
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }
    .metric-grid {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-bottom: 0;
      max-width: 180px;
      flex: 0 0 180px;
    }
    .metric-card {
      background: linear-gradient(135deg, #eff6ff 0%, #eef2ff 100%);
      border-radius: 18px;
      padding: 12px;
      border: 1px solid rgba(37, 99, 235, 0.15);
      color: #1d4ed8;
      text-align: center;
    }
    .metric-card span {
      font-size: 0.74rem;
      letter-spacing: 0.05em;
      color: rgba(37, 99, 235, 0.85);
      text-transform: uppercase;
    }
    .metric-card strong {
      display: block;
      margin-top: 8px;
      font-size: 1.2rem;
      color: #1e3a8a;
    }
    .chart-card {
      background: var(--surface-soft);
      border-radius: 16px;
      padding: 16px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      margin-bottom: 20px;
    }
    .metric-chart-row {
      display: flex;
      gap: 20px;
      align-items: flex-start;
      margin-bottom: 24px;
      flex-wrap: nowrap;
    }
    .chart-mix-card {
      flex: 1 1 280px;
      display: flex;
      flex-direction: column;
      max-width: 400px;
    }
    .meta-main-layout {
      display: grid;
      grid-template-columns: 240px minmax(0, 1fr);
      gap: 24px;
      margin-bottom: 24px;
    }
    .meta-kpi-column {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .meta-kpi-column .metric-card {
      width: 100%;
      max-width: none;
    }
    .meta-content-column {
      display: flex;
      flex-direction: column;
      gap: 24px;
      width: 100%;
      min-width: 0;
      box-sizing: border-box;
    }
    .meta-charts-column {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 100%;
    }
    .meta-charts-column .chart-mix-card {
      width: 100%;
      max-width: none;
    }
    .meta-bottom-row {
      display: grid;
      grid-template-columns: 65% 35%;
      gap: 24px;
      align-items: stretch;
      width: 100%;
      box-sizing: border-box;
      margin-top: 8px;
      padding-right: 28px;
    }
    .analyst-table-card h3 {
      text-align: center;
    }
    .meta-insights-column {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 100%;
      min-width: 0;
    }
    .meta-insights-column .insight-box {
      width: 100%;
    }
    .meta-analyst-column {
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    .meta-analyst-column .analyst-table-card {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .analyst-table-card {
      background: var(--surface-soft);
      border-radius: 16px;
      padding: 16px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      width: 100%;
      min-width: 0;
      overflow: hidden;
      box-sizing: border-box;
    }
    .analyst-table-card header {
      margin-bottom: 12px;
    }
    .analyst-table-card h3 {
      margin: 0;
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--text-primary);
    }
    .analyst-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      font-size: 0.9rem;
    }
    .analyst-table thead th {
      text-align: left;
      padding: 12px 8px;
      font-weight: 600;
      color: var(--text-secondary);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      border-bottom: 2px solid rgba(226, 232, 240, 0.6);
    }
    .analyst-table tbody td {
      padding: 12px 8px;
      border-bottom: 1px solid rgba(241, 245, 249, 0.8);
      vertical-align: middle;
    }
    .analyst-table tbody tr:last-child td {
      border-bottom: none;
    }
    .analyst-table tbody td:last-child {
      text-align: right;
      font-weight: 700;
      color: var(--text-primary);
      font-size: 1rem;
    }
    .rating-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      min-width: 90px;
      text-align: center;
    }
    .rating-strong-buy {
      background: rgba(21, 128, 61, 0.15);
      color: #15803d;
    }
    .rating-buy {
      background: rgba(74, 222, 128, 0.15);
      color: #16a34a;
    }
    .rating-hold {
      background: rgba(250, 204, 21, 0.15);
      color: #ca8a04;
    }
    .chart-column {
      display: flex;
      flex-direction: column;
      gap: 20px;
      flex: 1 1 280px;
      max-width: 400px;
    }
    .chart-mix-card .chart-body {
      flex: 1;
      height: 140px;
    }
    .chart-earnings {
      display: flex;
      flex-direction: column;
    }
    .chart-earnings .chart-body {
      height: 200px;
    }
    .chart-card header {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 3px;
      margin-bottom: 8px;
    }
    .chart-card h3 {
      margin: 0;
      font-size: 0.95rem;
      text-align: center;
      font-weight: 600;
    }
    .chart-card p {
      margin: 0;
      color: var(--text-secondary);
      font-size: 0.8rem;
      text-align: center;
    }
    .snapshot-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 18px;
      margin-top: 16px;
    }
    .snapshot-card {
      background: #f0fdf4;
      border-radius: 18px;
      padding: 18px;
      border: 1px solid rgba(74, 222, 128, 0.35);
      color: #14532d;
    }
    .snapshot-card h4 {
      margin: 0 0 8px;
      font-size: 0.95rem;
      color: #0f172a;
    }
    .snapshot-card ul {
      margin: 0;
      padding-left: 18px;
      color: #1f2937;
      font-size: 0.88rem;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .insight-box {
      background: var(--accent-soft);
      border-radius: 18px;
      padding: 18px;
      border: 1px solid rgba(37, 99, 235, 0.25);
      color: var(--text-primary);
    }
    .insight-box h4 {
      margin: 0 0 8px;
      font-size: 0.98rem;
      color: #1d4ed8;
    }
    .insight-box p {
      margin: 0;
      color: var(--text-secondary);
      line-height: 1.55;
    }
    .insight-layout {
      display: grid;
      grid-template-columns: 65% 35%;
      gap: 24px;
      align-items: stretch;
      margin-top: 24px;
      padding-right: 28px;
    }
    .insight-column {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    .analyst-card {
      display: flex;
      flex-direction: column;
      gap: 18px;
      height: auto;
    }
    .analyst-card .chart-holder {
      width: 100%;
      height: 260px;
    }
    footer {
      padding: 36px 20px;
      text-align: center;
      color: rgba(148, 163, 184, 0.65);
      font-size: 0.85rem;
    }
    @media (max-width: 960px) {
      .ca-wrapper { grid-template-columns: 1fr; }
      .insight-layout { grid-template-columns: 1fr; padding-right: 0; }
      .metric-chart-row { flex-direction: column; }
      .metric-grid { max-width: none; }
      .meta-main-layout { grid-template-columns: 1fr; gap: 20px; }
      .meta-kpi-column { order: 1; }
      .meta-content-column { order: 2; }
      .meta-charts-column { flex-direction: column; }
      .meta-bottom-row { grid-template-columns: 1fr; padding-right: 0; }
      .meta-insights-column { flex: 1 1 0; }
      .analyst-table-card { flex: 1 1 0; max-width: 100%; }
    }
    @media (max-width: 600px) {
       .ca-hero { padding: 72px 14px 42px; }
       .ca-hero h1 { font-size: 1.7rem; }
       .ca-wrapper { margin: -32px auto 60px; padding: 0 14px; }
       .ca-panel { padding: 18px; border-radius: 18px; }
       .detail-header { gap: 10px; }
       .detail-header p { font-size: 0.82rem; line-height: 1.45; }
       .metric-chart-row { flex-direction: column; gap: 16px; align-items: stretch; }
       .metric-grid { flex-direction: row; flex-wrap: wrap; justify-content: center; gap: 10px; max-width: none; }
       .meta-main-layout { grid-template-columns: 1fr; gap: 16px; }
       .meta-kpi-column { order: 1; }
       .meta-content-column { order: 2; }
       .meta-charts-column { flex-direction: column; gap: 16px; }
       .meta-bottom-row { grid-template-columns: 1fr; gap: 16px; padding-right: 0; }
       .meta-insights-column { flex: 1 1 0; }
       .analyst-table-card { flex: 1 1 0; max-width: 100%; }
       .metric-card { min-width: calc(50% - 10px); padding: 10px; border-radius: 14px; }
       .metric-card span { font-size: 0.68rem; }
       .metric-card strong { font-size: 1.15rem; }
       .chart-card { padding: 16px; border-radius: 16px; }
       .chart-card h3 { font-size: 0.95rem; }
       .chart-card p { font-size: 0.74rem; }
       .chart-mix-card .chart-body { height: 190px; }
       .chart-earnings .chart-body { height: 210px; }
       .snapshot-grid { grid-template-columns: 1fr; gap: 12px; }
       .snapshot-card { padding: 12px; border-radius: 16px; }
       .insight-layout { grid-template-columns: 1fr; gap: 14px; }
       .insight-box { padding: 12px; border-radius: 16px; }
       .analyst-card { max-width: none; }
       .analyst-card .chart-holder { height: 210px; }
     }
    @media (max-width: 820px) {
      .nav-links { display: none; }
      .mobile-menu-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 42px;
        height: 42px;
        border-radius: 12px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        background: #ffffff;
        color: var(--text-primary);
        font-size: 1.2rem;
      }
      .mobile-menu {
        position: absolute;
        top: 70px;
        left: 0;
        right: 0;
        background: #ffffff;
        display: none;
        flex-direction: column;
        gap: 12px;
        padding: 18px 24px;
        border-bottom: 1px solid rgba(229, 231, 235, 0.7);
      }
      .mobile-menu.active { display: flex; }
      .mobile-menu a {
        color: #1f2937;
        font-weight: 600;
      }
      .mobile-menu details {
        background: var(--accent-soft);
        border-radius: 14px;
        padding: 10px 14px;
      }
      .mobile-menu summary {
        list-style: none;
        cursor: pointer;
        font-weight: 600;
        color: #1d4ed8;
      }
      .mobile-menu-dropdown-content {
        margin-top: 10px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
    }
  </style>
</head>
<body>
  <nav class="navbar" role="navigation" aria-label="Main navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <a href="../index.html"><img src="../DDlogo.png?v=2" alt="Daily Dividend Logo - Markets within minutes"></a>
      </div>
      <div class="nav-links" role="menubar">
        <a href="../index.html#features">Why Us</a>
        <a href="../index.html#how-it-works">How it Works</a>
        <a href="../index.html#pricing">Pricing</a>
        <a href="../index.html#test">Test</a>
        <a href="../index.html#terms">Terms</a>
        <a href="../index.html#contact">Contact</a>
        <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
        <div class="nav-dropdown" id="toolsDropdown">
          <button class="nav-dropdown-btn" aria-haspopup="true" aria-expanded="false" id="toolsDropdownBtn">
            Tools <i class="fas fa-chevron-down"></i>
          </button>
          <div class="nav-dropdown-menu" id="toolsDropdownMenu" role="menu">
            <a href="earnings.html" class="nav-dropdown-item" role="menuitem"><i class="fas fa-calendar-alt"></i> Earnings Calendar</a>
            <a href="macro-calendar.html" class="nav-dropdown-item" role="menuitem"><i class="fas fa-chart-line"></i> Macro Calendar</a>
            <a href="hedge-fund.html" class="nav-dropdown-item" role="menuitem"><i class="fas fa-briefcase"></i> Hedge Fund Positioning</a>
            <a href="company-analysis.html" class="nav-dropdown-item" role="menuitem"><i class="fas fa-microchip"></i> Company Analysis</a>
          </div>
        </div>
      </div>
      <button class="mobile-menu-btn" type="button" aria-label="Toggle navigation menu" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
      <div class="mobile-menu" id="mobileMenu">
        <a href="../index.html#features" onclick="closeMobileMenu()">Why Us</a>
        <a href="../index.html#how-it-works" onclick="closeMobileMenu()">How it Works</a>
        <a href="../index.html#pricing" onclick="closeMobileMenu()">Pricing</a>
        <a href="../index.html#test" onclick="closeMobileMenu()">Test</a>
        <a href="../index.html#terms" onclick="closeMobileMenu()">Terms</a>
        <a href="../index.html#contact" onclick="closeMobileMenu()">Contact</a>
        <details class="mobile-menu-dropdown">
          <summary>Tools</summary>
          <div class="mobile-menu-dropdown-content">
            <a href="earnings.html" onclick="closeMobileMenu()"><i class="fas fa-calendar-alt"></i> Earnings Calendar</a>
            <a href="macro-calendar.html" onclick="closeMobileMenu()"><i class="fas fa-chart-line"></i> Macro Calendar</a>
            <a href="hedge-fund.html" onclick="closeMobileMenu()"><i class="fas fa-briefcase"></i> Hedge Fund Positioning</a>
            <a href="company-analysis.html" onclick="closeMobileMenu()"><i class="fas fa-microchip"></i> Company Analysis</a>
          </div>
        </details>
      </div>
    </div>
  </nav>

  <main>
    <section class="ca-hero" aria-labelledby="company-hero-heading">
      <h1 id="company-hero-heading">Company Analysis</h1>
    </section>

    <div class="ca-wrapper">
      <aside class="ca-panel" aria-label="Company list">
        <h2 style="margin:0 0 18px;font-size:1.08rem;">Companies</h2>
        <div class="company-list">
          <article class="company-card active" role="button" tabindex="0" data-company="nvidia">
            <h3>NVIDIA Corporation</h3>
            <div class="company-meta">
              <span><i class="fas fa-location-dot"></i> Santa Clara, California</span>
              <span><i class="fas fa-calendar"></i> Latest quarter Q2 FY26</span>
            </div>
          </article>
          <article class="company-card" role="button" tabindex="0" data-company="meta">
            <h3>Meta Platforms, Inc.</h3>
            <div class="company-meta">
              <span><i class="fas fa-location-dot"></i> Menlo Park, California</span>
              <span><i class="fas fa-calendar"></i> Latest quarter Q3 2025</span>
            </div>
          </article>
        </div>
      </aside>

      <div class="company-content-wrapper">
        <section class="ca-panel company-section active" id="companyDetail" aria-live="polite">
        <div class="detail-header">
          <h2 style="margin:0;font-size:1.8rem;">NVIDIA Corporation (NVDA)</h2>
          <span class="detail-pill"><i class="fas fa-microchip"></i> AI Infrastructure</span>
          <div class="detail-meta">
            <span><i class="fas fa-dollar-sign"></i> Market cap â‰ˆ $4.5T</span>
          </div>
          <p style="margin:6px 0 0;font-size:0.98rem;line-height:1.65;color:var(--text-secondary);">
            NVIDIA builds the hardware and software stack behind accelerated computing. Its CUDA ecosystem and specialized GPUs
            anchor hyperscale data centers, while the networking and systems portfolio captures full-stack AI spending. Gaming
            remains a profitable cash engine, professional visualization feeds digital twin demand, and the automotive platform
            scales with autonomous fleets. High gross margins, outsized free-cash-flow conversion, and a balance sheet rich in cash
            support aggressive R&amp;D and shareholder returns. Investors monitor supply chain execution, export restrictions, and
            hyperscaler capital cycles to gauge durability of the growth runway.
          </p>
        </div>

        <article class="chart-card" style="margin-bottom:30px;">
          <header>
            <div>
              <h3>Financial Snapshot</h3>
              <p>Quarterly ratios and income statement highlights worth tracking each earnings season.</p>
            </div>
          </header>
          <div class="snapshot-grid">
            <div class="snapshot-card">
              <h4><i class="fas fa-percentage"></i> Profitability</h4>
              <ul>
                <li>Net margin Q2 FY26: <strong>55.6%</strong></li>
                <li>Gross margin Q2 FY26: <strong>74%</strong></li>
                <li>Operating margin (TTM): <strong>60%</strong></li>
              </ul>
            </div>
            <div class="snapshot-card">
              <h4><i class="fas fa-chart-line"></i> Growth</h4>
              <ul>
                <li>Revenue YoY (Q2 FY26 / Q2 FY25): <strong>+56%</strong></li>
                <li>Net income YoY: <strong>+57%</strong></li>
                <li>Data Center revenue YoY: <strong>+56%</strong></li>
              </ul>
            </div>
            <div class="snapshot-card">
              <h4><i class="fas fa-trophy"></i> Competitive Positioning</h4>
              <ul>
                <li>#1 in AI accelerators with <strong>~85â€“90% share</strong></li>
                <li>Main challengers: <strong>AMD</strong>, <strong>Intel</strong>, <strong>hyperscaler custom silicon</strong></li>
                <li>Industry P/E avg: <strong>x35</strong></li>
              </ul>
            </div>
            <div class="snapshot-card">
              <h4><i class="fas fa-gauge-high"></i> Balance Sheet & Cash</h4>
              <ul>
                <li>Cash & equivalents (Q2 FY26): <strong>$31B</strong></li>
                <li>Long-term debt: <strong>$12B</strong></li>
                <li>Free cash flow margin (TTM): <strong>46%</strong></li>
              </ul>
            </div>
          </div>
        </article>

        <div class="metric-chart-row">
          <div class="metric-grid">
            <div class="metric-card">
              <span>Revenue (QoQ)</span>
              <strong>$46.7B</strong>
            </div>
            <div class="metric-card">
              <span>Net Income (QoQ)</span>
              <strong>$26.0B</strong>
            </div>
            <div class="metric-card">
              <span>Trailing P/E</span>
              <strong>53Ã—</strong>
            </div>
            <div class="metric-card">
              <span>EPS (TTM)</span>
              <strong>$3.50</strong>
            </div>
          </div>

          <article class="chart-card chart-mix-card">
            <header>
              <div>
                <h3>Revenue Mix</h3>
                <p>Segment contribution in billions.</p>
              </div>
            </header>
            <div class="chart-body">
              <canvas id="revenueMixChart" aria-label="Revenue breakdown pie chart" role="img"></canvas>
            </div>
          </article>
        </div>

        <article class="chart-card chart-earnings">
          <header>
            <div>
              <h3>Revenue vs Earnings</h3>
              <p>Quarterly revenue and profitability trends.</p>
            </div>
          </header>
          <div class="chart-body">
            <canvas id="revenueEarningsChart" aria-label="Revenue and earnings chart" role="img"></canvas>
          </div>
        </article>

        <div class="insight-layout">
          <div class="insight-column">
            <div class="insight-box">
              <h4><i class="fas fa-shield-halved"></i> Risk Watchlist</h4>
              <p>Export restrictions to China, reliance on TSMC 4/5 nm capacity, bespoke silicon from hyperscalers, and capital spending digestion remain the primary 2026 watch points.</p>
            </div>
            <div class="insight-box">
              <h4><i class="fas fa-rocket"></i> Growth Drivers</h4>
              <p>Blackwell-class accelerators and hyperscaler AI buildouts keep Data Center revenue compounding at double-digit sequential rates.</p>
            </div>
          </div>
          <div class="meta-analyst-column">
            <article class="analyst-table-card">
              <header>
                <h3>Analyst Recommendations</h3>
              </header>
              <table class="analyst-table">
                <thead>
                  <tr>
                    <th>Rating</th>
                    <th>Count</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="rating-badge rating-strong-buy">Strong Buy</span></td>
                    <td><strong>10</strong></td>
                  </tr>
                  <tr>
                    <td><span class="rating-badge rating-buy">Buy</span></td>
                    <td><strong>49</strong></td>
                  </tr>
                  <tr>
                    <td><span class="rating-badge rating-hold">Hold</span></td>
                    <td><strong>5</strong></td>
                  </tr>
                  <tr>
                    <td><span class="rating-badge" style="background:rgba(239,68,68,0.15);color:#dc2626;">Sell</span></td>
                    <td><strong>0</strong></td>
                  </tr>
                </tbody>
              </table>
            </article>
            <div class="data-source" style="text-align: right; font-size: 0.75rem; color: #94a3b8; margin-top: 6px; font-style: italic;">
              Source: Yahoo Finance
            </div>
          </div>
        </div>
      </section>

      <!-- Meta Platforms, Inc. Section -->
      <section class="ca-panel company-section" id="metaDetail" aria-live="polite">
        <div class="detail-header">
          <h2 style="margin:0;font-size:1.8rem;">Meta Platforms, Inc. (META)</h2>
          <span class="detail-pill"><i class="fas fa-network-wired"></i> Social platforms & AI infrastructure</span>
          <div class="detail-meta">
            <span><i class="fas fa-dollar-sign"></i> Market cap â‰ˆ $1.8T</span>
          </div>
          <p style="margin:6px 0 0;font-size:0.98rem;line-height:1.65;color:var(--text-secondary);">
            Meta operates one of the largest consumer internet ecosystems in the world across Facebook, Instagram, WhatsApp, and Messenger. The core business is performance advertising delivered through large-scale recommendation systems, trained on engagement and commerce data across billions of users.
          </p>
          <p style="margin:12px 0 0;font-size:0.98rem;line-height:1.65;color:var(--text-secondary);">
            Under the Meta Superintelligence Labs umbrella, the company is aggressively investing in frontier AI models, compute infrastructure, and AI-native products like Meta AI, Vibes, and AI-powered glasses. Reality Labs (VR/AR hardware and software) remains a long-duration bet on the next computing platform and is currently a drag on profitability.
          </p>
        </div>

        <article class="chart-card" style="margin-bottom:30px;">
          <header>
            <div>
              <h3>Financial Snapshot</h3>
              <p>Quarterly ratios and income statement highlights worth tracking each earnings season.</p>
            </div>
          </header>
          <div class="snapshot-grid">
            <div class="snapshot-card">
              <h4><i class="fas fa-percentage"></i> Profitability</h4>
              <ul>
                <li>Net margin Q3 2025 (GAAP, after charge): <strong>~5%</strong></li>
                <li>Operating margin Q3 2025: <strong>40%</strong></li>
                <li>Gross margin Q3 2025: <strong>~82%</strong></li>
              </ul>
            </div>
            <div class="snapshot-card">
              <h4><i class="fas fa-chart-line"></i> Growth</h4>
              <ul>
                <li>Revenue YoY (Q3 2025 vs Q3 2024): <strong>+26%</strong></li>
                <li>Average price per ad YoY: <strong>+10%</strong></li>
                <li>Daily active people (DAP) YoY: <strong>+8% to ~3.54B</strong></li>
              </ul>
            </div>
            <div class="snapshot-card">
              <h4><i class="fas fa-trophy"></i> Competitive Positioning</h4>
              <ul>
                <li><strong>#1 global social ecosystem</strong> with ~3.5B daily users across the Family of Apps</li>
                <li>Core moat: <strong>massive user scale, engagement, and AI-powered ad optimization</strong></li>
                <li>Key competitive pressures: <strong>TikTok, YouTube, Snap, and privacy / platform changes from Apple & Google</strong></li>
              </ul>
            </div>
            <div class="snapshot-card">
              <h4><i class="fas fa-gauge-high"></i> Balance Sheet & Cash</h4>
              <ul>
                <li>Cash & marketable securities (Q3 2025): <strong>â‰ˆ $44.5B</strong></li>
                <li>Free cash flow (Q3 2025): <strong>â‰ˆ $10.6B (~21% FCF margin)</strong></li>
                <li>Quarterly dividend per share (Q3 2025): <strong>$0.525</strong></li>
              </ul>
            </div>
          </div>
        </article>

        <div class="meta-main-layout">
          <div class="meta-kpi-column">
            <div class="metric-card">
              <span>Revenue (QoQ)</span>
              <strong>$51.2B</strong>
            </div>
            <div class="metric-card">
              <span>Net Income (QoQ)</span>
              <strong>â‰ˆ $18.6B</strong>
              <small style="display:block;font-size:0.7rem;margin-top:4px;opacity:0.8;">GAAP: $2.7B</small>
            </div>
            <div class="metric-card">
              <span>Trailing P/E</span>
              <strong>â‰ˆ 32Ã—</strong>
            </div>
            <div class="metric-card">
              <span>EPS (TTM)</span>
              <strong>â‰ˆ $22.6</strong>
            </div>
            <div class="metric-card">
              <span>Net Margin (adj)</span>
              <strong>~36%</strong>
            </div>
            <div class="metric-card">
              <span>Rev Growth (YoY)</span>
              <strong>+26%</strong>
            </div>
          </div>

          <div class="meta-content-column">
            <div class="meta-charts-column">
              <article class="chart-card chart-mix-card">
                <header>
                  <div>
                    <h3>Revenue Mix</h3>
                    <p>Business line contribution in billions â€“ Meta Platforms Q3 2025.</p>
                  </div>
                </header>
                <div class="chart-body">
                  <canvas id="metaRevenueMixChart" aria-label="Meta revenue breakdown pie chart" role="img"></canvas>
                </div>
              </article>

              <article class="chart-card chart-mix-card">
                <header>
                  <div>
                    <h3>Regional Revenue Split</h3>
                    <p>Geographic contribution in billions â€“ Meta Platforms Q3 2025.</p>
                  </div>
                </header>
                <div class="chart-body">
                  <canvas id="metaRegionalRevenueChart" aria-label="Meta regional revenue breakdown pie chart" role="img"></canvas>
                </div>
              </article>
            </div>
          </div>
        </div>

        <div class="meta-bottom-row">
          <div class="meta-insights-column">
            <div class="insight-box">
              <h4><i class="fas fa-shield-halved"></i> Risk Watchlist</h4>
              <p>Privacy regulation (EU and US), youth-safety litigation risk, and potential structural changes to ad targeting (e.g., Less Personalized Ads requirements in the EU) remain key overhangs. Heavy AI capex and elevated operating expenses in 2025â€“2026 could compress margins if revenue growth slows.</p>
            </div>

            <div class="insight-box">
              <h4><i class="fas fa-rocket"></i> Growth Drivers</h4>
              <p>Further monetization of Reels and short-form video, improved AI ad ranking and measurement, business messaging (WhatsApp) and AI agents, as well as scaled adoption of AI glasses and future AR devices are the primary levers for sustaining double-digit top-line growth.</p>
            </div>
          </div>

          <div class="meta-analyst-column">
            <div class="analyst-table-card">
              <header>
                <h3>Analyst Recommendations</h3>
              </header>
              <table class="analyst-table">
                <thead>
                  <tr>
                    <th>Rating</th>
                    <th>Count</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="rating-badge rating-strong-buy">Strong Buy</span></td>
                    <td><strong>10</strong></td>
                  </tr>
                  <tr>
                    <td><span class="rating-badge rating-buy">Buy</span></td>
                    <td><strong>50</strong></td>
                  </tr>
                  <tr>
                    <td><span class="rating-badge rating-hold">Hold</span></td>
                    <td><strong>7</strong></td>
                  </tr>
                  <tr>
                    <td><span class="rating-badge" style="background:rgba(239,68,68,0.15);color:#dc2626;">Sell</span></td>
                    <td><strong>0</strong></td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="data-source" style="text-align: right; font-size: 0.75rem; color: #94a3b8; margin-top: 6px; font-style: italic;">
              Source: Yahoo Finance
            </div>
          </div>
        </div>
      </section>
      </div>
    </div>
  </main>

  <!-- Disclaimer -->
  <div style="max-width: 1200px; margin: 40px auto; padding: 0 24px;">
    <div style="padding: 20px; background: #f8fafc; border-radius: 12px; border-left: 4px solid #3b82f6;">
      <p style="margin: 0; color: #6b7280; font-size: 0.9rem; line-height: 1.6;">
        <strong style="color: #374151;">Disclaimer:</strong> This company analysis is for informational purposes only and does not constitute investment advice. The data presented is compiled from various online sources. Daily Dividend is not responsible for any investment decisions made based on this information. Always consult with a qualified financial advisor before making investment decisions.
      </p>
    </div>
  </div>

  <footer>&copy; 2025 Daily Dividend. All rights reserved.</footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js" crossorigin="anonymous"></script>
  <script>
    const mobileMenu = document.getElementById('mobileMenu');
    function toggleMobileMenu() {
      if (mobileMenu) mobileMenu.classList.toggle('active');
    }
    function closeMobileMenu() {
      if (mobileMenu) mobileMenu.classList.remove('active');
    }
    document.addEventListener('click', (event) => {
      const btn = document.querySelector('.mobile-menu-btn');
      if (mobileMenu && mobileMenu.classList.contains('active')) {
        if (!mobileMenu.contains(event.target) && !btn.contains(event.target)) {
          closeMobileMenu();
        }
      }
    });

    const toolsDropdown = document.getElementById('toolsDropdown');
    const toolsDropdownBtn = document.getElementById('toolsDropdownBtn');
    const toolsDropdownMenu = document.getElementById('toolsDropdownMenu');
    if (toolsDropdown && toolsDropdownBtn && toolsDropdownMenu) {
      let hideTimeout;
      const showMenu = () => {
        clearTimeout(hideTimeout);
        toolsDropdownMenu.classList.add('active');
        toolsDropdownBtn.setAttribute('aria-expanded', 'true');
      };
      const hideMenu = () => {
        clearTimeout(hideTimeout);
        toolsDropdownMenu.classList.remove('active');
        toolsDropdownBtn.setAttribute('aria-expanded', 'false');
      };
      toolsDropdown.addEventListener('mouseenter', showMenu);
      toolsDropdown.addEventListener('mouseleave', () => hideTimeout = setTimeout(hideMenu, 200));
      toolsDropdownBtn.addEventListener('click', (event) => {
        event.stopPropagation();
        const isOpen = toolsDropdownMenu.classList.contains('active');
        if (isOpen) hideMenu(); else showMenu();
      });
      document.addEventListener('click', (event) => {
        if (!toolsDropdown.contains(event.target)) hideMenu();
      });
      toolsDropdownBtn.addEventListener('keydown', (event) => {
        if (event.key === 'Enter' || event.key === ' ') {
          event.preventDefault();
          const isOpen = toolsDropdownMenu.classList.contains('active');
          if (isOpen) hideMenu(); else showMenu();
        }
      });
    }

    if (typeof Chart !== 'undefined') {
      const interStack = "'Inter', 'Segoe UI', 'Helvetica Neue', Arial, sans-serif";
      Chart.defaults.font.family = interStack;
      Chart.defaults.font.size = 13;
      Chart.defaults.color = 'rgba(17, 24, 39, 0.78)';
      Chart.defaults.plugins.legend.labels.font = { family: interStack, size: 13, weight: '500' };
      Chart.defaults.plugins.tooltip.titleFont = { family: interStack, size: 13, weight: '600' };
      Chart.defaults.plugins.tooltip.bodyFont = { family: interStack, size: 12, weight: '500' };
      Chart.defaults.devicePixelRatio = Math.min(3, Math.max(window.devicePixelRatio || 1, 2));
    }

    const quarters = ['Q3 FY25', 'Q4 FY25', 'Q1 FY26', 'Q2 FY26'];
    const revenueTotals = [18670, 20480, 21470, 22460]; // USD millions (company filings)
    const netIncome = [1760, 1860, 1950, 2010]; // USD millions (company filings)

    const revenueCtx = document.getElementById('revenueEarningsChart');
    const revenueChart = new Chart(revenueCtx, {
      type: 'bar',
      data: {
        labels: quarters,
        datasets: [
          {
            type: 'bar',
            label: 'Revenue (USD millions)',
            data: revenueTotals,
            backgroundColor: 'rgba(59, 130, 246, 0.8)',
            borderRadius: 8,
            borderWidth: 0,
            order: 2,
            yAxisID: 'y'
          },
          {
            type: 'line',
            label: 'Net Income (USD millions)',
            data: netIncome,
            borderColor: '#f97316',
            backgroundColor: '#f97316',
            tension: 0.32,
            fill: false,
            pointRadius: 5,
            pointBackgroundColor: '#f97316',
            pointBorderColor: '#f97316',
            borderWidth: 3,
            order: 1,
            yAxisID: 'y1'
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        animation: { duration: 240, easing: 'easeOutQuad' },
        responsiveAnimationDuration: 0,
        interaction: { mode: 'index', intersect: false },
        plugins: {
          legend: {
            position: 'bottom',
            labels: { color: 'rgba(30, 41, 59, 0.88)' }
          },
          tooltip: {
            callbacks: {
              label: (context) => `${context.dataset.label}: $${(context.parsed.y / 1000).toFixed(2)}B`
            }
          }
        },
        scales: {
          x: {
            ticks: { color: 'rgba(71, 85, 105, 0.85)' },
            grid: { display: false }
          },
          y: {
            type: 'linear',
            position: 'left',
            ticks: {
              color: 'rgba(71, 85, 105, 0.85)',
              callback: (value) => `$${(value / 1000).toFixed(0)}B`
            },
            grid: { color: 'rgba(203, 213, 225, 0.45)' },
            beginAtZero: true
          },
          y1: {
            type: 'linear',
            position: 'right',
            ticks: {
              color: 'rgba(71, 85, 105, 0.85)',
              callback: (value) => `$${(value / 1000).toFixed(2)}B`
            },
            grid: { drawOnChartArea: false },
            beginAtZero: true,
            suggestedMax: 2200
          }
        }
      }
    });

    const revenueMixCtx = document.getElementById('revenueMixChart');
    const revenueMixData = [41.096, 4.287, 0.601, 0.586, 0.173];
    const revenueMixTotal = revenueMixData.reduce((sum, value) => sum + value, 0);
    new Chart(revenueMixCtx, {
      type: 'doughnut',
      data: {
        labels: ['Data Center', 'Gaming', 'Professional Visualization', 'Auto', 'OEM & Other'],
        datasets: [{
          data: revenueMixData,
          backgroundColor: [
            'rgba(59,130,246,0.85)',
            'rgba(56,189,248,0.75)',
            'rgba(129,140,248,0.8)',
            'rgba(244,114,182,0.75)',
            'rgba(248,250,252,0.65)'
          ],
          borderColor: '#ffffff',
          borderWidth: 3,
          hoverOffset: 6
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        animation: { duration: 280, easing: 'easeOutQuad' },
        responsiveAnimationDuration: 0,
        interaction: { mode: 'nearest', intersect: true },
        plugins: {
          legend: {
            position: 'right',
            labels: {
              color: 'rgba(30, 41, 59, 0.88)',
              boxWidth: 14,
              boxHeight: 10,
              padding: 8,
              font: { size: 11, family: "Inter" },
              generateLabels: (chart) => {
                const data = chart.data;
                if (!data.labels?.length) return [];
                const meta = chart.getDatasetMeta(0);
                return data.labels.map((label, index) => {
                  const style = meta.controller.getStyle(index);
                  return {
                    text: label,
                    fillStyle: style.backgroundColor,
                    strokeStyle: style.borderColor,
                    lineWidth: style.borderWidth,
                    datasetIndex: 0,
                    index
                  };
                });
              }
            }
          },
          tooltip: {
            callbacks: {
              label: (context) => {
                const value = context.parsed;
                const percentage = ((value / revenueMixTotal) * 100).toFixed(1);
                return `${percentage}% of revenue`;
              },
              title: (items) => items?.[0]?.label || ''
            }
          }
        },
        cutout: '55%'
      }
    });

    // Meta Platforms Revenue Mix Chart
    const metaRevenueMixCtx = document.getElementById('metaRevenueMixChart');
    if (metaRevenueMixCtx) {
      const metaRevenueMixData = [50.082, 0.690, 0.470];
      const metaRevenueMixTotal = metaRevenueMixData.reduce((sum, value) => sum + value, 0);
      new Chart(metaRevenueMixCtx, {
        type: 'doughnut',
        data: {
          labels: ['Advertising', 'Messaging & Subscriptions', 'Reality Labs & Devices'],
          datasets: [{
            data: metaRevenueMixData,
            backgroundColor: [
              'rgba(59,130,246,0.85)',
              'rgba(56,189,248,0.75)',
              'rgba(244,114,182,0.75)'
            ],
            borderColor: '#ffffff',
            borderWidth: 3,
            hoverOffset: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          animation: { duration: 280, easing: 'easeOutQuad' },
          responsiveAnimationDuration: 0,
          interaction: { mode: 'nearest', intersect: true },
          plugins: {
            legend: {
              position: 'right',
              labels: {
                color: 'rgba(30, 41, 59, 0.88)',
                boxWidth: 14,
                boxHeight: 10,
                padding: 8,
                font: { size: 11, family: "Inter" },
                generateLabels: (chart) => {
                  const data = chart.data;
                  if (!data.labels?.length) return [];
                  const meta = chart.getDatasetMeta(0);
                  return data.labels.map((label, index) => {
                    const style = meta.controller.getStyle(index);
                    return {
                      text: label,
                      fillStyle: style.backgroundColor,
                      strokeStyle: style.borderColor,
                      lineWidth: style.borderWidth,
                      datasetIndex: 0,
                      index
                    };
                  });
                }
              }
            },
            tooltip: {
              callbacks: {
                label: (context) => {
                  const value = context.parsed;
                  const percentage = ((value / metaRevenueMixTotal) * 100).toFixed(1);
                  return `${percentage}% of revenue`;
                },
                title: (items) => items?.[0]?.label || ''
              }
            }
          },
          cutout: '55%'
        }
      });
    }

    // Meta Platforms Regional Revenue Chart
    const metaRegionalRevenueCtx = document.getElementById('metaRegionalRevenueChart');
    if (metaRegionalRevenueCtx) {
      const metaRegionalRevenueData = [19.708, 11.566, 14.304, 5.664];
      const metaRegionalRevenueTotal = metaRegionalRevenueData.reduce((sum, value) => sum + value, 0);
      new Chart(metaRegionalRevenueCtx, {
        type: 'doughnut',
        data: {
          labels: ['US & Canada', 'Europe', 'Asia-Pacific', 'Rest of World'],
          datasets: [{
            data: metaRegionalRevenueData,
            backgroundColor: [
              'rgba(59,130,246,0.85)',
              'rgba(56,189,248,0.75)',
              'rgba(129,140,248,0.8)',
              'rgba(244,114,182,0.75)'
            ],
            borderColor: '#ffffff',
            borderWidth: 3,
            hoverOffset: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          animation: { duration: 280, easing: 'easeOutQuad' },
          responsiveAnimationDuration: 0,
          interaction: { mode: 'nearest', intersect: true },
          plugins: {
            legend: {
              position: 'right',
              labels: {
                color: 'rgba(30, 41, 59, 0.88)',
                boxWidth: 14,
                boxHeight: 10,
                padding: 8,
                font: { size: 11, family: "Inter" },
                generateLabels: (chart) => {
                  const data = chart.data;
                  if (!data.labels?.length) return [];
                  const meta = chart.getDatasetMeta(0);
                  return data.labels.map((label, index) => {
                    const style = meta.controller.getStyle(index);
                    return {
                      text: label,
                      fillStyle: style.backgroundColor,
                      strokeStyle: style.borderColor,
                      lineWidth: style.borderWidth,
                      datasetIndex: 0,
                      index
                    };
                  });
                }
              }
            },
            tooltip: {
              callbacks: {
                label: (context) => {
                  const value = context.parsed;
                  const percentage = ((value / metaRegionalRevenueTotal) * 100).toFixed(1);
                  return `${percentage}% of revenue`;
                },
                title: (items) => items?.[0]?.label || ''
              }
            }
          },
          cutout: '55%'
        }
      });
    }


    // Company card navigation - Tab switching (using data attributes for reliability)
    (function() {
      function switchCompany(companyId) {
        // Hide ALL sections by removing active class (CSS !important will handle display)
        const allSections = document.querySelectorAll('.company-section');
        allSections.forEach(section => {
          section.classList.remove('active');
        });
        
        // Show target section by adding active class
        const targetSection = document.getElementById(companyId);
        if (targetSection) {
          targetSection.classList.add('active');
        } else {
          console.error('Section not found:', companyId);
        }
      }
      
      function initCompanyCards() {
        const cards = document.querySelectorAll('.company-card[data-company]');
        console.log('Found company cards:', cards.length);
        
        if (cards.length === 0) {
          console.warn('No company cards with data-company attribute found');
          return;
        }
        
        // Ensure only NVIDIA is visible on load (remove active from Meta if present)
        const allSections = document.querySelectorAll('.company-section');
        allSections.forEach(section => {
          if (section.id === 'companyDetail') {
            section.classList.add('active');
          } else {
            section.classList.remove('active');
          }
        });
        
        // Add click handlers
        cards.forEach(card => {
          card.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const companyId = this.getAttribute('data-company');
            console.log('Clicked company:', companyId);
            
            // Update active card
            document.querySelectorAll('.company-card').forEach(c => c.classList.remove('active'));
            this.classList.add('active');
            
            // Switch sections based on data attribute
            if (companyId === 'meta') {
              switchCompany('metaDetail');
            } else if (companyId === 'nvidia') {
              switchCompany('companyDetail');
            }
          });
        });
      }
      
      // Initialize when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initCompanyCards);
      } else {
        initCompanyCards();
      }
    })();

    // Logout functionality - Always show if we're on this page (guard ensures we're logged in)
    async function initLogout() {
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) {
        // Since the guard script at the top ensures we're logged in, always show the button
        logoutBtn.style.display = 'inline-block';
        logoutBtn.style.visibility = 'visible';
        logoutBtn.style.opacity = '1';
        
        // Import and set up logout handler (only once)
        if (!logoutBtn.dataset.listenerAttached) {
          const { logout } = await import('../auth.js');
          
          logoutBtn.addEventListener('click', (e) => {
            e.preventDefault();
            if (confirm('Are you sure you want to logout?')) {
              logout();
              window.location.href = '/login.html';
            }
          });
          
          logoutBtn.dataset.listenerAttached = 'true';
        }
      }
    }

    // Initialize logout on page load
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initLogout);
    } else {
      initLogout();
    }
  </script>
</body>
</html>

